javascript:(function(){let%20v=null;for(let%20el%20of%20document.querySelectorAll("video")){if(el.currentTime>0&&!el.paused&&!el.ended&&el.readyState>2&&el.videoWidth>0){v=el;break}}if(!v||!v.videoWidth){alert("No%20active%20HTML5%20video%20found%20on%20this%20page.");return}const%20ts=()=>{const%20d=new%20Date(),p=n=>String(n).padStart(2,"0");return%20d.getFullYear()+p(d.getMonth()+1)+p(d.getDate())+p(d.getHours())+p(d.getMinutes())+p(d.getSeconds())};const%20canvas=document.createElement("canvas");canvas.width=v.videoWidth;canvas.height=v.videoHeight;const%20ctx=canvas.getContext("2d");if(!ctx){alert("Canvas%20is%20not%20supported%20in%20this%20browser.");return}const%20mime="video/mp4";if(!window.MediaRecorder||!MediaRecorder.isTypeSupported(mime)){alert("MP4%20recording%20is%20not%20supported%20in%20this%20browser.");return}let%20recorder=null,chunks=[],recording=false,rafId=null;function%20draw(){try{ctx.drawImage(v,0,0,canvas.width,canvas.height)}catch(e){console.error(e);stop();alert("Unable%20to%20draw%20video%20frame.%20The%20video%20may%20be%20protected%20or%20cross-origin.");return}rafId=requestAnimationFrame(draw)}function%20start(){try{if(!canvas.captureStream){alert("MediaRecorder%20is%20not%20supported%20in%20this%20browser.");return}const%20stream=canvas.captureStream(30);recorder=new%20MediaRecorder(stream,{mimeType:mime});chunks=[];recorder.ondataavailable=e=>chunks.push(e.data);recorder.onstop=()=>{const%20blob=new%20Blob(chunks,{type:mime});const%20url=URL.createObjectURL(blob);const%20a=document.createElement("a");a.href=url;a.download="video_"+ts()+".mp4";a.click();URL.revokeObjectURL(url)};draw();recorder.start();btnRec.textContent="Stop";recording=true}catch(e){alert("Failed%20to%20start%20recording.%20Your%20browser%20may%20not%20support%20MP4%20recording.");console.error(e)}}function%20stop(){try{if(rafId){cancelAnimationFrame(rafId);rafId=null}if(recorder&&recorder.state==="recording"){recorder.stop()}btnRec.textContent="Record";recording=false}catch(e){alert("Failed%20to%20stop%20recording.");console.error(e)}}function%20snap(){try{ctx.drawImage(v,0,0,canvas.width,canvas.height);const%20url=canvas.toDataURL("image/png");const%20a=document.createElement("a");a.href=url;a.download="image_"+ts()+".png";a.click()}catch(e){alert("Failed%20to%20capture%20image.%20The%20video%20may%20be%20protected%20or%20cross-origin.");console.error(e)}}const%20existing=document.getElementById("mco-pill");if(existing){existing.remove()}const%20pill=document.createElement("div");pill.id="mco-pill";pill.style.cssText="position:fixed;top:20px;right:20px;display:flex;gap:8px;background:#111;color:#fff;padding:8px%2010px;border-radius:999px;font-family:system-ui,sans-serif;font-size:14px;z-index:999999;box-shadow:0%204px%2012px%20rgba(0,0,0,.4);user-select:none;";const%20btnSnap=document.createElement("div");btnSnap.textContent="Capture";btnSnap.style.cssText="padding:6px%2012px;border-radius:999px;background:#222;cursor:pointer;";const%20btnRec=document.createElement("div");btnRec.textContent="Record";btnRec.style.cssText="padding:6px%2012px;border-radius:999px;background:#222;cursor:pointer;";const%20btnClose=document.createElement("div");btnClose.textContent="%E2%9C%95";btnClose.style.cssText="padding:6px%2010px;border-radius:999px;background:#222;cursor:pointer;";btnSnap.onclick=snap;btnRec.onclick=()=>{recording?stop():start()};btnClose.onclick=()=>{if(recording){stop()}pill.remove()};pill.appendChild(btnSnap);pill.appendChild(btnRec);pill.appendChild(btnClose);document.body.appendChild(pill);})();
