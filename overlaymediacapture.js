javascript:(function(){let%20v=null;for(let%20el%20of%20document.querySelectorAll("video")){if(el.currentTime>0&&!el.paused&&!el.ended&&el.readyState>2&&el.videoWidth>0){v=el;break}}if(!v||!v.videoWidth){alert("No%20active%20HTML5%20video%20found%20on%20this%20page.");return}const%20ts=()=>{const%20d=new%20Date(),p=n=>String(n).padStart(2,"0");return%20d.getFullYear()+p(d.getMonth()+1)+p(d.getDate())+p(d.getHours())+p(d.getMinutes())+p(d.getSeconds())};const%20canvas=document.createElement("canvas");canvas.width=v.videoWidth;canvas.height=v.videoHeight;const%20ctx=canvas.getContext("2d");if(!ctx){alert("Canvas%20is%20not%20supported%20in%20this%20browser.");return}const%20mime="video/mp4";if(!window.MediaRecorder||!MediaRecorder.isTypeSupported(mime)){alert("MP4%20recording%20is%20not%20supported%20in%20this%20browser.");return}let%20recorder=null,chunks=[],recording=false,rafId=null,startTime=0,timerInterval=null,totalSize=0,segmentCount=0,baseTimestamp='';const%20SEGMENT_SIZE_MB=500;function%20formatSize(bytes){if(bytes<1024)return%20bytes+'%20B';if(bytes<1024*1024)return(bytes/1024).toFixed(1)+'%20KB';return(bytes/(1024*1024)).toFixed(1)+'%20MB'}function%20saveSegment(){const%20blob=new%20Blob(chunks,{type:mime});const%20url=URL.createObjectURL(blob);const%20a=document.createElement("a");a.href=url;const%20segmentSuffix=segmentCount>0?'_part'+(segmentCount+1):'';a.download="video_"+baseTimestamp+segmentSuffix+".mp4";a.click();URL.revokeObjectURL(url);segmentCount++;chunks=[];totalSize=0}function%20updateTimer(){const%20elapsed=Math.floor((Date.now()-startTime)/1000);const%20h=Math.floor(elapsed/3600);const%20m=Math.floor((elapsed%253600)/60);const%20s=elapsed%2560;timerDisplay.textContent=String(h).padStart(2,"0")+':'+String(m).padStart(2,"0")+':'+String(s).padStart(2,"0");timerDisplay.style.display="block";sizeDisplay.textContent=formatSize(totalSize);sizeDisplay.style.display="block";const%20sizeMB=totalSize/(1024*1024);if(sizeMB>=SEGMENT_SIZE_MB){saveSegment();if(recording){recorder.stop();setTimeout(()=>{if(recording)startRecording()},100)}}}function%20draw(){try{ctx.drawImage(v,0,0,canvas.width,canvas.height)}catch(e){console.error(e);stop();alert("Unable%20to%20draw%20video%20frame.%20The%20video%20may%20be%20protected%20or%20cross-origin.");return}rafId=requestAnimationFrame(draw)}function%20startRecording(){const%20stream=canvas.captureStream(30);recorder=new%20MediaRecorder(stream,{mimeType:mime});recorder.ondataavailable=e=>{chunks.push(e.data);totalSize+=e.data.size};recorder.onstop=()=>{if(!recording){saveSegment()}};draw();recorder.start(1000)}function%20start(){try{if(!canvas.captureStream){alert("MediaRecorder%20is%20not%20supported%20in%20this%20browser.");return}chunks=[];totalSize=0;segmentCount=0;baseTimestamp=ts();startRecording();startTime=Date.now();timerInterval=setInterval(updateTimer,1000);updateTimer();btnRec.textContent="Stop";recording=true}catch(e){alert("Failed%20to%20start%20recording.%20Your%20browser%20may%20not%20support%20MP4%20recording.");console.error(e)}}function%20stop(){try{recording=false;if(rafId){cancelAnimationFrame(rafId);rafId=null}if(recorder&&recorder.state==="recording"){recorder.stop()}if(timerInterval){clearInterval(timerInterval);timerInterval=null}timerDisplay.style.display="none";sizeDisplay.style.display="none";btnRec.textContent="Record"}catch(e){alert("Failed%20to%20stop%20recording.");console.error(e)}}function%20snap(){try{ctx.drawImage(v,0,0,canvas.width,canvas.height);const%20url=canvas.toDataURL("image/png");const%20a=document.createElement("a");a.href=url;a.download="image_"+ts()+".png";a.click()}catch(e){alert("Failed%20to%20capture%20image.%20The%20video%20may%20be%20protected%20or%20cross-origin.");console.error(e)}}const%20existing=document.getElementById("mco-pill");if(existing){existing.remove()}const%20pill=document.createElement("div");pill.id="mco-pill";pill.style.cssText="position:fixed;top:20px;right:20px;display:flex;gap:8px;background:#111;color:#fff;padding:8px%2010px;border-radius:999px;font-family:system-ui,sans-serif;font-size:14px;z-index:999999;box-shadow:0%204px%2012px%20rgba(0,0,0,.4);user-select:none;align-items:center;";const%20btnSnap=document.createElement("div");btnSnap.textContent="Capture";btnSnap.style.cssText="padding:6px%2012px;border-radius:999px;background:#222;cursor:pointer;";const%20btnRec=document.createElement("div");btnRec.textContent="Record";btnRec.style.cssText="padding:6px%2012px;border-radius:999px;background:#222;cursor:pointer;";const%20timerDisplay=document.createElement("div");timerDisplay.textContent="00:00:00";timerDisplay.style.cssText="padding:6px%2012px;border-radius:999px;background:#222;font-variant-numeric:tabular-nums;display:none;";const%20sizeDisplay=document.createElement("div");sizeDisplay.textContent="0%20MB";sizeDisplay.style.cssText="padding:6px%2012px;border-radius:999px;background:#222;font-variant-numeric:tabular-nums;display:none;color:%2388ff88;";const%20btnClose=document.createElement("div");btnClose.innerHTML="&times;";btnClose.style.cssText="padding:6px%2010px;border-radius:999px;background:#222;cursor:pointer;";btnSnap.onclick=snap;btnRec.onclick=()=>{recording?stop():start()};btnClose.onclick=()=>{if(recording){stop()}pill.remove()};pill.appendChild(btnSnap);pill.appendChild(btnRec);pill.appendChild(timerDisplay);pill.appendChild(sizeDisplay);pill.appendChild(btnClose);document.body.appendChild(pill);})();
